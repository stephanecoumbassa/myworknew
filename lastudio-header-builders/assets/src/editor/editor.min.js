window.onload=function(){document.body.style.display="block"},function(a){"use strict";a(function(){function e(e,a,l){var t=new RegExp("([?&])"+a+"=.*?(&|$)","i"),n=-1===e.indexOf("?")?"?":"&";return e.match(t)?e.replace(t,"$1"+a+"="+l+"$2"):e+n+a+"="+l}function l(){}function t(e){try{JSON.parse(e)}catch(a){return!1}return!0}function n(e){return e===Object(e)}function d(){return!!f.hasClass("lastudio-frontend-builder-wrap")}function i(e,t,n){let d=e.attr("data-element"),i=e.attr("data-unique-id"),h=i;y.hasOwnProperty(h)||(y[h]={}),0<!v.children(".lahb-spinner-wrap").length&&v.prepend("<div class=\"lahb-spinner-wrap\"><div class=\"lahb-spinner\"><div class=\"double-bounce1\"></div><div class=\"double-bounce2\"></div></div></div>"),a.ajax({type:"POST",url:lahb_localize.ajaxurl,data:{action:"lahb_ajax_action",router:"get_component_field",nonce:lahb_localize.nonce,el_name:d},success:function(l){0<v.children(".lahb-spinner-wrap").length&&v.children(".lahb-spinner-wrap").remove(),a(".lastudio-backend-header-builder-wrap").append(l),u=v.find(".lahb-modal-wrap[data-element-target=\""+d+"\"]"),u.find(".lahb-tabs-list").find("li").removeClass("w-active"),u.find(".lahb-tab-panel").hide(),u.find(".lahb-tabs-list").find("li:first").addClass("w-active"),u.find(".lahb-modal-contents").children(".lahb-tab-panel:first").show();var c=u.find(".lahb-modal-contents").children(".lahb-tab-panel");if("desktop-view"==t?c.find(".lahb-tab-panel[data-id=\"#all\"]").show():"tablets-view"==t?c.find(".lahb-tab-panel[data-id=\"#tablets\"]").show():"mobiles-view"==t?c.find(".lahb-tab-panel[data-id=\"#mobiles\"]").show():"sticky-view"==t&&c.find(".lahb-tab-panel[data-id=\"#all\"]").show(),c.find(".lahb-tab-panel").find(".lahb-tab-panel:first").show(),u.show(),u.find(".lahb-field").each(function(){let e=a(this),l=e.find(".lahb-field-input"),t=l.data("field-name"),n=l.data("field-std");n="undefined"==typeof n?"":n,"undefined"==typeof y[h][t]?(l.val(n),n&&(y[h][t]=n)):l.val(y[h][t])}),n){let a=e.find("a").find("i").attr("class");if("sticky-view"==t)_[t][D][x].push({name:d,uniqueId:i,hidden_element:!1,editor_icon:a});else for(var b in C)_[b][D][x].push({name:d,uniqueId:i,hidden_element:!1,editor_icon:a})}if(r(),u.find(".lahb-dependency").on("change",function(){s(a(this))}),u.find(".lahb-dependency").trigger("change"),n){var p=e[0].outerHTML;a(".lahb-elements-item[data-element=\""+d+"\"][data-unique-id=\""+i+"\"]").each(function(){a(this).replaceWith(p)})}o(u[0])}}),l()}function s(e){let l=e.data("dependency"),t=e.find(".lahb-field-input").val();a.each(l,function(e,l){for(let n=0;n<l.length;n++){let d=u.find(".lahb-field-input[data-field-name=\""+l[n]+"\"]").closest(".lahb-field").hide(),i="lahb-field w-col-sm-12 lahb-dependency"==d.attr("class");e==t?(d.show(),i&&s(d)):i&&a.each(d.data("dependency"),function(e,a){for(let l=0;l<a.length;l++)u.find(".lahb-field-input[data-field-name=\""+a[l]+"\"]").closest(".lahb-field").hide()})}})}function r(){let e=a(".lahb-modal-wrap");e.find(".lahb-switcher").find(".lahb-field-input").on("change",function(){let e=a(this);e.is(":checked")?(e.val("true"),e.prop("checked",!0)):(e.val("false"),e.prop("checked",!1))}),e.find(".lahb-attach-image").each(function(){let e,l=a(this),t=l.find(".lahb-add-image"),n=l.find(".lahb-remove-image"),d=l.find(".lahb-preview-image");t.on("click",function(a){a.preventDefault();let t=l.find("input.lahb-attach-image"),i=t.val();return i=i?i:"",e?void e.open():void(e=wp.media({multiple:!1}),e.on("select",function(){let a=e.state().get("selection").first().toJSON();d.html("").append("<img src=\""+a.url+"\" alt=\"\">").css("display","block"),t.val(a.id),n.show()}),e.open())}),n.on("click",function(e){e.preventDefault();let a=l.find("input.lahb-attach-image");d.html("").hide(),n.hide(),a.val("")})}),e.find(".lahb-number-unit").each(function(){let e=a(this),l=e.find("input[type=\"number\"]"),t=e.find(".lahb-opts").children("span"),n=e.find(".lahb-field-input");t.on("click",function(e){e.preventDefault();let d=a(this),i=d.data("value"),s=l.val();t.removeClass("lahb-active"),d.addClass("lahb-active"),s&&n.val(s+i)}),l.on("change",function(t){t.preventDefault();let d=a(this),i=e.find(".lahb-opts").children("span.lahb-active").data("value"),s=l.val();s?n.val(s+i):n.val("")})}),e.find(".lahb-custom-select").find(".lahb-opts").find("span").on("click",function(){let e=a(this),l=e.closest(".lahb-custom-select"),t=l.find(".lahb-opts").children("span"),n=l.find(".lahb-field-input"),d=e.data("value");t.removeClass("lahb-active"),e.addClass("lahb-active"),n.val(d)}),e.find(".lahb-field-icons-wrap").each(function(){let e=a(this),l=e.find(".la-icon-wrap").find("label"),t=e.find(".lahb-field-input");l.on("click",function(e){e.preventDefault();let n=a(this),d=n.attr("for");l.removeClass("lahb-active"),n.addClass("lahb-active"),t.val(a("#"+d).val())})}),e.find(".lahb-color-picker").wpColorPicker(),e.find(".lahb-field").find(".lahb-field-input").each(function(){let e=a(this);if(e.hasClass("lahb-switcher-field")&&("true"==e.val()?e.prop("checked",!0):e.prop("checked",!1)),e.hasClass("lahb-field-custom-select")&&e.siblings(".lahb-opts").find("span").each(function(){let l=a(this);l.removeClass("lahb-active"),l.data("value")==e.val()&&l.addClass("lahb-active")}),e.hasClass("lahb-field-number-unit")){let l=e.val();if(l){let t=e.closest(".lahb-number-unit"),n=t.find("input[type=\"number\"]"),d=t.find(".lahb-opts").children("span"),i=parseFloat(l),s=l.split(i)[1];n.val(i),d.each(function(){let e=a(this),l=e.data("value");e.removeClass("lahb-active"),l==s&&e.addClass("lahb-active")})}else e.closest(".lahb-number-unit").find("input[type=\"number\"]").val("")}if(e.hasClass("lahb-icon-field")){let a=e.val(),l=e.closest(".lahb-field-icons-wrap"),t=l.find(".la-icon-wrap").find("label"),n=l.find(".lastudio-icons-list");a?(t.removeClass("lahb-active"),l.find(".la-icon-wrap input[value=\""+a+"\"]").next("label").addClass("lahb-active"),l.find(".la-icon-wrap input[value=\""+a+"\"]").closest(".la-icon-wrap").prependTo(n)):t.removeClass("lahb-active")}if(e.hasClass("lahb-attach-image")){let a=e.val(),l=e.siblings(".lahb-remove-image"),t=e.siblings(".lahb-preview-image");if(a&&!wp.media.attachment(a).destroyed){0<!u.find(".lahb-modal-contents").find(".lahb-spinner-wrap").length&&u.find(".lahb-modal-contents").prepend("<div class=\"lahb-spinner-wrap\"><div class=\"lahb-spinner\"><div class=\"double-bounce1\"></div><div class=\"double-bounce2\"></div></div></div>");try{wp.media.attachment(a).fetch().done(function(){0<u.find(".lahb-modal-contents").find(".lahb-spinner-wrap").length&&u.find(".lahb-modal-contents").find(".lahb-spinner-wrap").remove(),t.html("").append("<img src=\""+this.attributes.url+"\" alt=\"\">").css("display","block"),l.show()}).fail(function(){0<u.find(".lahb-modal-contents").find(".lahb-spinner-wrap").length&&u.find(".lahb-modal-contents").find(".lahb-spinner-wrap").remove(),t.html("").hide(),l.hide(),e.val("")})}catch(a){0<u.find(".lahb-modal-contents").find(".lahb-spinner-wrap").length&&u.find(".lahb-modal-contents").find(".lahb-spinner-wrap").remove(),t.html("").hide(),l.hide(),e.val("")}}else 0<u.find(".lahb-modal-contents").find(".lahb-spinner-wrap").length&&u.find(".lahb-modal-contents").find(".lahb-spinner-wrap").remove(),t.html("").hide(),l.hide()}})}function o(a){function l(a){a=a||window.event,s=a.clientX,r=a.clientY,document.onmouseup=n,document.onmousemove=t}function t(l){l=l||window.event,d=s-l.clientX,i=r-l.clientY,s=l.clientX,r=l.clientY,a.style.top=a.offsetTop-i+"px",a.style.left=a.offsetLeft-d+"px"}function n(){document.onmouseup=null,document.onmousemove=null}if("undefined"==typeof a)return;let d=0,i=0,s=0,r=0;a.getElementsByClassName("lahb-modal-header")?a.getElementsByClassName("lahb-modal-header")[0].onmousedown=l:a.onmousedown=l}function h(){let e,l,t,n=a("#LaStudo_Iframe");n.length&&(t=document.getElementById("LaStudo_Iframe").contentWindow.jQuery,e=t("#lastudio-header-builder"),0==e.children(".lahb-spinner-wrap").length&&e.prepend("<div class=\"lahb-spinner-wrap\"><div class=\"lahb-spinner\"><div class=\"double-bounce1\"></div><div class=\"double-bounce2\"></div></div></div>")),l=a(".lahb_save"),l.length&&l.val(lahb_localize.i18n.saved_text),a.ajax({type:"POST",url:lahb_localize.ajaxurl,data:{action:"lahb_ajax_action",router:"save_header_data",nonce:lahb_localize.nonce,headerPreset:lahb_localize.prebuild_header_key,frontendComponents:JSON.stringify(k)},success:function(i){if(d()){var s=a(i),r=s[0],o=s[1];t("#lahb-frontend-styles-inline-css").replaceWith(o),e.replaceWith(r);let d=k["desktop-view"].row1.settings,h=d.header_type,c="undefined"==typeof d.vertical_toggle?"false":d.vertical_toggle;"vertical"==h?(t("body").addClass("header-type-vertical"),"true"==c?t("body").removeClass("header-type-vertical--default").addClass("header-type-vertical--toggle"):t("body").removeClass("header-type-vertical--toggle").addClass("header-type-vertical--default")):t("body").removeClass("header-type-vertical header-type-vertical--toggle header-type-vertical--default"),n.length&&document.getElementById("LaStudo_Iframe").contentWindow.LaStudio.component.HeaderBuilder.reloadAllEvents(),l.val(lahb_localize.i18n.save_text),e.children(".lahb-spinner-wrap").remove()}},complete:function(){}}).done(function(){q&&a("#lahb-publish").trigger("click")})}function c(){for(let e in k=a.extend(!0,{},_),k)for(let a in k[e])for(let l in k[e][a]){let t=k[e][a][l];if("settings"==l||"left_settings"==l||"center_settings"==l||"right_settings"==l){let e=t.uniqueId;for(const a in e in y&&Object.assign(t,y[e]),t)if(t.hasOwnProperty(a)){const e=t[a];"hidden_element"!=a&&"boolean"==typeof e&&(t[a]=e+"")}}else if(0!=t.length)for(let e of t){let a=e.uniqueId;for(const l in a in y&&Object.assign(e,y[a]),e)if(e.hasOwnProperty(l)){const a=e[l];"hidden_element"!=l&&"boolean"==typeof a&&(e[l]=a+"")}}}k["desktop-view"].row1.settings.element=_["desktop-view"].row1.settings.element,k["desktop-view"].row1.settings.header_type=_["desktop-view"].row1.settings.header_type}function b(e){p(e.target.result)}function p(e){e&&(t(e)||n(e))?(f.css({height:"1px",overflow:"hidden"}).prepend("<div class=\"lahb-spinner-wrap\"><div class=\"lahb-spinner\"><div class=\"double-bounce1\"></div><div class=\"double-bounce2\"></div></div></div>"),a("#wpwrap").css("display","none"),e=t(e)?JSON.parse(e):e,y=e.lahb_data_components,_=e.lahb_data_editor_components,k=e.lahb_data_frontend_components,q=!0,h()):alert("Header import input is empty! That's why no data can import.")}a(document).on("keyup",".lastudio-icons-list-wrapper .la-icon-wrap-search",function(){var e=a(this).val(),l=a(this).next(".lastudio-icons-list").find(".la-icon-wrap");l.each(function(){var l=a(this);0>l.data("name").search(new RegExp(e,"i"))?l.hide():l.show()})});let m,u,f=a("body"),v=a("#lastudio-backend-header-builder"),w=v.find(".lahb-elements-place"),g=v.find(".lahb-desktop-panel").find(".lahb-columns[data-columns=\"row1\"]").find(".lahb-elements-place"),y=lahb_localize.components?lahb_localize.components:{},_=lahb_localize.editor_components?lahb_localize.editor_components:{},k=lahb_localize.frontend_components?lahb_localize.frontend_components:{};const C={"desktop-view":{},"tablets-view":{},"mobiles-view":{}};let x,D,I,S,q=!1;for(let e in f.removeClass("admin-bar"),l(),y)if(y.hasOwnProperty(e)){const l=y[e];if(-1!=e.search("logo")){let t=e.slice("5");v.find(".lahb-elements-item[data-element=\"logo\"][data-unique-id=\""+t+"\"]").each(function(){let e=a(this);wp.media.attachment(l.logo).fetch().done(function(){e.children("a").hide().after("<img class=\"lahb-img-placeholder-el\" src=\""+this.attributes.url+"\" alt=\"\">")})})}}if(v.on("click","#lahb-cleardata",function(t){if(t.preventDefault(),confirm(lahb_localize.i18n.clear_data_text)){let e=a.extend(!0,{},lahb_localize.default_data.editor_components);y={},_=e,k=lahb_localize.default_data.frontend_components,v.find(".lahb-col .lahb-elements-item").remove(),v.find("[data-unique-id]").map(function(){a(this).attr("data-unique-id",lahb_localize.default_data.uniqid+a(this).attr("data-unique-id").substr(13))}),h(),l()}}),a("#LaStudo_Iframe").css("height",window.innerHeight-48),a(".lahb-frontend-builder").niceScroll({cursorborder:"0",background:"#e7e7e7",cursorcolor:"#91989e"}),v.find(".lahb-tab-panel"+v.find(".lahb-tabs-list").find("li.w-active").find("a").attr("href")).show(),v.on("click",".lahb-tabs-list a",function(e){e.preventDefault();let l=a(this),t=l.parent(),n=l.closest("ul").find("li"),d=l.closest("ul");t.hasClass("w-active")||(n.removeClass("w-active"),t.addClass("w-active"),d.hasClass("lahb-element-groups")?v.find(".lahb-group-panel").hide().end().find(".lahb-group-panel[data-id=\""+l.attr("href")+"\"]").show():d.hasClass("lahb-styling-groups")?d.siblings(".lahb-styling-group-panel").hide().end().siblings(".lahb-styling-group-panel[data-id=\""+l.attr("href")+"\"]").show():d.hasClass("lahb-styling-screens")?v.find(".lahb-styling-screen-panel").hide().end().find(".lahb-styling-screen-panel[data-id=\""+l.attr("href")+"\"]").show():v.find(".lahb-tab-panel:not(.lahb-group-panel)").hide().end().find(".lahb-tab-panel"+l.attr("href")).fadeIn(300))}),a("#lahb-desktop-tab, #lahb-sticky-tab").on("click",function(l){l.preventDefault(),f.removeClass("lahb-tablets-device lahb-mobiles-device"),a(".lahb-screen-view").hide(),a(".lahb-desktop-view, .lahb-sticky-view").show()}),a("#lahb-tablets-tab").on("click",function(l){l.preventDefault(),f.removeClass("lahb-mobiles-device"),f.addClass("lahb-tablets-device"),a(".lahb-screen-view").hide(),a(".lahb-tablets-view").show()}),a("#lahb-mobiles-tab").on("click",function(l){l.preventDefault(),f.removeClass("lahb-tablets-device"),f.addClass("lahb-mobiles-device"),a(".lahb-screen-view").hide(),a(".lahb-mobiles-view").show()}),v.find(".lahb-full-modal-btn").on("click",function(e){e.preventDefault();let l=a(this),t=l.data("modal-target"),n=v.find(".lahb-full-modal[data-modal=\""+t+"\"]");f.css("overflow","hidden"),n.find("textarea").val(" "),n.fadeIn(200)}),v.find(".lahb-full-modal-close").on("click",function(e){e.preventDefault(),f.css("overflow","initial"),v.find(".lahb-full-modal").hide()}),v.on("click",".w-add-element",function(e){e.preventDefault();let l=a(this);v.find(".lahb-elements").show(),I=l.closest(".lahb-tab-panel").attr("id"),D=l.closest(".lahb-columns").attr("data-columns"),x=l.attr("data-align-col")}),v.on("click",".lahb-modal-header i, .lahb_close",function(e){e.preventDefault();try{v.find(".lahb-color-picker").data("wpWpColorPicker").close()}catch(a){}v.find(".lahb-modal-wrap").hide(),v.find(".lahb-modal-wrap[data-element-target]").remove()}),v.find(".lahb-modal-wrap").on("click",".lahb-elements-item a",function(e){e.preventDefault();let l=a(this),t=new Date().valueOf(),n=a(this).find("i").attr("class"),d=`<span class="lahb-controls"><span class="lahb-tooltip tooltip-on-top" data-tooltip="Copy to Clipboard"><i class="lahb-control lahb-copy-btn dashicons dashicons-admin-page"></i></span><span class="lahb-tooltip tooltip-on-top" data-tooltip="Settings"><i class="lahb-control lahb-edit-btn dashicons dashicons-edit"></i></span><span class="lahb-tooltip tooltip-on-top" data-tooltip="Hide"><i class="lahb-control lahb-hide-btn dashicons dashicons-visibility"></i></span><span class="lahb-tooltip tooltip-on-top" data-tooltip="Remove"><i class="lahb-control lahb-delete-btn dashicons dashicons-trash"></i></span></span>`;if(l.closest(".lahb-elements-item").hasClass("lahb-clipboard-item")){let e=l.parent(),n=e.data("unique-id").toString();for(const e in y)if(y.hasOwnProperty(e)){const l=a.extend(!0,{},y[e]);n==e&&(y[t]=l)}m=S.clone().removeClass("w-col-sm-4").attr({"data-unique-id":t}).prepend(d)}else m=l.parent().clone().removeClass("w-col-sm-4").attr({"data-unique-id":t,"data-hidden_element":!1,"data-editor_icon":n}).prepend(d);v.find(".lahb-columns[data-columns=\""+D+"\"]").find(".lahb-col.col-"+x).find(".lahb-elements-place").append(m),v.find(".lahb-modal-wrap").hide(),i(m,I,!0)}),v.on("click",".lahb-copy-btn",function(e){e.preventDefault();let l=a(this).closest(".lahb-elements-item").clone();S=l.clone(),a(".lahb-clipboard-item").remove(),l.removeClass("ui-sortable-handle").addClass("w-col-sm-4 lahb-clipboard-item"),l.children(".lahb-controls").remove().end().children("img").remove(),l.children("a").css({display:"block","background-color":"#e3e3e3"}),l.find("i").removeClass("fa fa-circle-thin").addClass("fa fa-clipboard").css("color","#f60"),l.find(".lahb-element-name").text("Paste (Clipboard)"),a(".lahb-modal-wrap.lahb-elements").find(".lahb-modal-contents").prepend(l)}),v.on("click",".lahb-delete-btn",function(e){if(e.preventDefault(),confirm("Press OK to delete element, Cancel to leave")){let e=a(this).closest(".lahb-elements-item"),t=e.data("element"),n=e.data("unique-id").toString();if(I=e.closest(".lahb-tab-panel").attr("id"),D=e.closest(".lahb-columns").attr("data-columns"),x=e.closest(".lahb-col").attr("data-align-col"),delete y[n],"sticky-view"==I){let e=_[I][D][x];for(let a=0;a<e.length;a++)e[a].uniqueId==n&&e.splice(a,1)}else for(let e in C){let a=_[e];(function(){for(let e in a){let l=a[e];for(let e in l){let a=l[e];for(let e=0;e<a.length;e++)if(a[e].uniqueId==n)return void a.splice(e,1)}}})()}c(),h(),l(),v.find(".lahb-elements-item[data-element=\""+t+"\"][data-unique-id=\""+n+"\"]").remove()}}),v.on("click","#lahb-saveastpl",function(l){l.preventDefault();let e=v.find(".lahb-modal-save-header");u=e,e.show(),r(),e.find(".lahb-dependency").on("change",function(){s(a(this))}),e.find(".lahb-dependency").trigger("change")}),v.on("click",".lahb_save_as_template",function(l){l.preventDefault();let t=v.find(".lahb-modal-save-header"),n=t.find("select[data-field-name=\"lahb_save_header_type\"]"),d=t.find("select[data-field-name=\"lahb_save_header_type_existing\"]"),i=t.find("input[data-field-name=\"lahb_save_header_type_new\"]"),s=t.find("input[data-field-name=\"lahb_save_header_custom_image\"]");if("add_new"==n.val()&&""==i.val())return alert("Please enter the new header name !"),!1;if("update"==n.val()&&0==a("option",d).length)return alert("Sorry currently you haven't any data yet - please use Add New method"),!1;let r={action:"lahb_ajax_action",router:"save_header_as_template",nonce:lahb_localize.nonce,frontendComponents:JSON.stringify(k),header_name:"",header_key:"",header_image:""};""!=s.val()&&(r.header_image=s.val()),"add_new"==n.val()&&(r.header_name=i.val()),"update"==n.val()&&(r.header_name=a("option:selected",d).text(),r.header_key=d.val()),a.ajax({type:"POST",url:lahb_localize.ajaxurl,data:r,dataType:"json",success:function(l){if(l.success){let n="";for(let a in l.data){let t=l.data[a],d=e(window.location.href,"prebuild_header",a);n+="undefined"==typeof t.image?"<a class=\"lahb-prebuild-item\" data-saved-name=\""+a+"\" href=\""+d+"\"><span>"+t.name+"</span><i class=\"dashicons dashicons-trash\"></i></a>":"<a class=\"lahb-prebuild-item\" data-saved-name=\""+a+"\" href=\""+d+"\"><img src=\""+t.image+"\" alt=\""+t.name+"\"/><i class=\"dashicons dashicons-trash\"></i></a>"}a(".lahb-predefined-modal-inner-content").html(n),alert("Saved successfully!"),t.hide()}else alert("Sorry, please try again!")}})}),v.on("click",".lahb-edit-btn",function(e){e.preventDefault();let l=a(this);v.find(".lahb-modal-wrap").hide(),v.find(".lahb-modal-wrap[data-element-target]").remove(),m=l.closest(".lahb-elements-item"),I=l.closest(".lahb-tab-panel").attr("id"),i(m,I,!1)}),v.on("click",".w-edit-column",function(e){e.preventDefault();let l=a(this);v.find(".lahb-modal-wrap").hide(),v.find(".lahb-modal-wrap[data-element-target]").remove(),m=l,I=l.closest(".lahb-tab-panel").attr("id"),i(m,I,!1)}),v.find(".lahb-tabs-panels").find(".lahb-columns").children(".lahb-elements-item[data-hidden_element=\"true\"]").find("i.lahb-hide-btn").removeClass("dashicons dashicons-visibility").addClass("dashicons dashicons-hidden").closest(".lahb-columns").addClass("lahb-columns-hidden").css("opacity","0.45"),v.find(".lahb-elements-place").find(".lahb-elements-item[data-hidden_element=\"true\"]").find("i.lahb-hide-btn").removeClass("dashicons dashicons-visibility").addClass("dashicons dashicons-hidden"),v.on("click",".lahb-hide-btn",function(e){e.preventDefault();let t,n=a(this),d=n.closest(".lahb-elements-item"),i=d.data("element"),s=d.data("unique-id").toString();if(I=d.closest(".lahb-tab-panel").attr("id"),D=d.closest(".lahb-columns").attr("data-columns"),x=d.closest(".lahb-col").attr("data-align-col"),"header-area"==i||"sticky-area"==i){let e=_[I][D].settings.hidden_element;_[I][D].settings.hidden_element=!e,t=!e,d.attr("data-hidden_element",!e).data("hidden_element",!e);let a=d.closest(".lahb-columns");t?(n.removeClass("dashicons dashicons-visibility").addClass("dashicons dashicons-hidden"),a.addClass("lahb-columns-hidden").css("opacity","0.45")):(n.removeClass("dashicons dashicons-hidden").addClass("dashicons dashicons-visibility"),a.removeClass("lahb-columns-hidden").css("opacity","1"))}else{const e=_[I][D][x];for(let a,l=0;l<e.length;l++)if(a=e[l],a.uniqueId==s){a.hidden_element=!a.hidden_element,t=a.hidden_element,d.attr("data-hidden_element",a.hidden_element).data("hidden_element",a.hidden_element);break}t?(n.removeClass("dashicons dashicons-visibility").addClass("dashicons dashicons-hidden"),d.find("a").css("color","#888"),d.addClass("lahb-columns-hidden").css("opacity","0.45")):(n.removeClass("dashicons dashicons-hidden").addClass("dashicons dashicons-visibility"),d.find("a").css("color","#0073aa"),d.removeClass("lahb-columns-hidden").css("opacity","1"))}c(),h(),l()}),v.on("click",".lahb_save",function(e){e.preventDefault();let t=a(this),n=m.data("element"),i=m.data("unique-id"),s=i;u.find(".lahb-field").each(function(){let e=a(this),l=e.find(".lahb-field-input"),t=l.data("field-name"),n=l.val();""==n?y[s].hasOwnProperty(t)&&(y[s][t]=n):null!=n&&("string"==typeof n&&-1!=n.indexOf("\"")&&(n=n.replace(/"/g,"'")),y[s][t]=n)}),c(),h(),l();let r=m[0].outerHTML,o=v.find(".lahb-elements-item[data-element=\""+n+"\"][data-unique-id=\""+i+"\"]");o.each(function(){a(this).replaceWith(r)}),o=v.find(".lahb-elements-item[data-element=\""+n+"\"][data-unique-id=\""+i+"\"]"),u.find(".lahb-field.lahb-placeholder").each(function(){let e=a(this);if(e.hasClass("lahb-img-placeholder")){let a=e.find(".lahb-field-input").val();a?wp.media.attachment(a).fetch().done(function(){0<!o.children(".lahb-img-placeholder-el").length?o.attr("data-img-placeholder",a).children("a").hide().after("<img class=\"lahb-img-placeholder-el\" src=\""+this.attributes.url+"\" alt=\"\" />"):o.children(".lahb-img-placeholder-el").attr("src",this.attributes.url)}):o.removeAttr("data-img-placeholder").children("a").show().end().children(".lahb-img-placeholder-el").remove()}if(e.hasClass("lahb-text-placeholder")){let a=e.find(".lahb-field-input").val();a.trim()?0<!o.find("a").find(".lahb-text-placeholder-el").length?o.find("a").find(".lahb-element-name").hide().after("<span class=\"lahb-text-placeholder-el\">"+a+"</span>"):o.find("a").find(".lahb-text-placeholder-el").html(a):o.find("a").find("span.lahb-element-name").show().end().end().find(".lahb-text-placeholder-el").remove()}}),d()||(v.find(".lahb-modal-wrap").hide(),v.find(".lahb-modal-wrap[data-element-target]").remove())}),function(){w.sortable({connectWith:".lahb-elements-place",placeholder:"ui-sortable-placeholder",forcePlaceholderSize:!0,tolerance:"pointer",start:function(e,l){let t=a(l.item);I=t.closest(".lahb-tab-panel").attr("id"),D=t.closest(".lahb-columns").attr("data-columns"),x=t.closest(".lahb-col").attr("data-align-col")},beforeStop:function(e,t){let n,d=a(t.item),i=d.closest(".lahb-elements-place"),s=d.data("element"),r=d.data("unique-id").toString(),o=_[I][D][x];for(let a=0;a<o.length;a++)o[a].uniqueId==r&&(n=o.splice(a,1));D=d.closest(".lahb-columns").attr("data-columns"),x=d.closest(".lahb-col").attr("data-align-col");let b=i.children(".lahb-elements-item").map(function(e,l){return d=a(l),{name:d.data("element"),uniqueId:d.data("unique-id").toString(),hidden_element:JSON.parse(d.data("hidden_element")),editor_icon:d.data("editor_icon")}}).get();_[I][D][x]=b,c(),h(),l()}}).disableSelection()}(),o(a(".lahb-modal-wrap")[0]),a("#lahb-publish").on("click",function(){if(0==v.children(".lahb-spinner-wrap").length&&v.prepend("<div class=\"lahb-spinner-wrap\"><div class=\"lahb-spinner\"><div class=\"double-bounce1\"></div><div class=\"double-bounce2\"></div></div></div>"),document.getElementById("LaStudo_Iframe")){let e=document.getElementById("LaStudo_Iframe").contentWindow.jQuery("#lastudio-header-builder");0==e.children(".lahb-spinner-wrap").length&&e.prepend("<div class=\"lahb-spinner-wrap\"><div class=\"lahb-spinner\"><div class=\"double-bounce1\"></div><div class=\"double-bounce2\"></div></div></div>")}a.ajax({type:"POST",url:lahb_localize.ajaxurl,data:{action:"lahb_ajax_action",router:"publish_header",nonce:lahb_localize.nonce,frontendComponents:JSON.stringify(k)},success:function(){if(v.children(".lahb-spinner-wrap").remove(),document.getElementById("LaStudo_Iframe")){let e=document.getElementById("LaStudo_Iframe").contentWindow.jQuery("#lastudio-header-builder");e.children(".lahb-spinner-wrap").remove()}q&&location.reload()}})}),a(".lahb-action-collapse").on("click",function(){let e=a(this),l=a(".lastudio-backend-header-builder-wrap.lahb-frontend-builder").css("bottom","-60%"),t=a(".lahb-actions").css("bottom","0");e.hasClass("lahb-open")?(l.css("bottom","-60%"),t.css("bottom","0"),e.removeClass("lahb-open"),e.children("i").attr("class","dashicons dashicons-upload")):(l.css("bottom","0"),t.css("bottom","60%"),e.addClass("lahb-open"),e.children("i").attr("class","dashicons dashicons-download"))}),a.lahbGetMultiScripts=function(e,l){let t=a.map(e,function(e){return a.getScript((l||"")+e)});return t.push(a.Deferred(function(e){a(e.resolve)})),a.when.apply(a,t)},a.getStylesheet=function(e){var l=a.Deferred(),t=a("<link/>",{rel:"stylesheet",type:"text/css",href:e}).appendTo("head");return l.resolve(t),l.promise()},a("#lahb-import").change(function(){var e=event.target.files[0],a=new FileReader;a.onload=b,a.readAsText(e)}),a(document).on("click",".lahb-prebuild-item",function(e){if(e.preventDefault(),"undefined"==typeof a(this).attr("data-file-name"))window.location.href=a(this).attr("href");else if(confirm("Your selected header pre-defined will apply on current elements and settings. Are you sure you want to overwrite?")){let e=a(this).attr("data-file-name"),l=lahb_localize.prebuilds_url+e;a.ajax({dataType:"json",type:"POST",url:l,success:function(e){p(e)}})}}),a(document).on("click",".lahb-full-modal .lahb-prebuild-item i.dashicons-trash",function(){return event.preventDefault(),confirm("Are you sure you want to delete this preset ?")&&a.ajax({type:"POST",url:lahb_localize.ajaxurl,data:{action:"lahb_ajax_action",router:"delete_header_preset_template",nonce:lahb_localize.nonce,header_key:a(this).parent().data("saved-name")},dataType:"json",success:function(l){if(l.success){let t="";for(let a in l.data){let n=l.data[a],d=e(window.location.href,"prebuild_header",a);t+="undefined"==typeof n.image?"<a class=\"lahb-prebuild-item\" data-saved-name=\""+a+"\" href=\""+d+"\"><span>"+n.name+"</span><i class=\"dashicons dashicons-trash\"></i></a>":"<a class=\"lahb-prebuild-item\" data-saved-name=\""+a+"\" href=\""+d+"\"><img src=\""+n.image+"\" alt=\""+n.name+"\"/><i class=\"dashicons dashicons-trash\"></i></a>"}a(".lahb-predefined-modal-inner-content").html(t),alert("Deleted successfully!")}else alert("Sorry, please try again!")}}),!1}),"vertical"==_["desktop-view"].row1.settings.header_type){let e=v.find(".lahb-tabs-panels"),l=e.find("#desktop-view").children(".lahb-columns[data-columns=\"row1\"]").children(".lahb-elements-item"),t=a("#lahb-vertical-header");l.attr("data-element","vertical-area"),t.find("span").text("Horizontal Header"),e.addClass("lahb-vertical-header-panel"),g.sortable({axis:"y"})}v.on("click","#lahb-vertical-header",function(e){e.preventDefault();let t=a(this),n=a(".lahb-tabs-list"),d=v.find(".lahb-tabs-panels"),i=d.find("#desktop-view").children(".lahb-columns[data-columns=\"row1\"]").children(".lahb-elements-item"),s=_["desktop-view"].row1.settings,r=s.header_type;"horizontal"==r?(s.element="vertical-area",i.attr("data-element","vertical-area"),s.header_type="vertical",t.find("span").text(lahb_localize.i18n.horizontal_header_text),d.addClass("lahb-vertical-header-panel"),g.sortable({axis:"y"})):(s.element="header-area",i.attr("data-element","header-area"),s.header_type="horizontal",t.find("span").text(lahb_localize.i18n.vertical_header_text),d.removeClass("lahb-vertical-header-panel"),g.sortable({axis:""}),a("#wrap").removeClass("lahb-header-vertical-toggle")),k["desktop-view"].row1.settings.element=_["desktop-view"].row1.settings.element,k["desktop-view"].row1.settings.header_type=_["desktop-view"].row1.settings.header_type,c(),h(),l(),n.find("li").removeClass("w-active"),n.find("li:first-child").addClass("w-active"),a(".lahb-tab-panel").hide(),a("#desktop-view").show()})})}(jQuery);